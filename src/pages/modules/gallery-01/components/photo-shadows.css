/* Physics-based photo shadow with soft edges */
.photo-shadow::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: calc(100% + var(--shadow-spread, 0) * 1px);
  height: calc(100% + var(--shadow-spread, 0) * 1px);
  background: rgba(
    calc(var(--shadow-color-r, 0.2) * 255),
    calc(var(--shadow-color-g, 0.2) * 255),
    calc(var(--shadow-color-b, 0.2) * 255),
    var(--shadow-opacity, 0.3)
  );
  z-index: -1;
  pointer-events: none;
  filter: blur(calc(var(--shadow-blur, 1) * 1px));
  transform: translate(
    calc(var(--shadow-x, 0) * 1px), 
    calc(var(--shadow-y, 0) * 1px)
  ) rotate(calc(var(--shadow-rotation, 0) * 1deg));
  border-radius: calc(var(--shadow-softness, 0) * 1px);
}

/* Soft penumbra effect for realistic shadow edges */
.photo-shadow::after {
  content: '';
  position: absolute;
  top: calc(var(--penumbra-offset-y, 0) * 1px);
  left: calc(var(--penumbra-offset-x, 0) * 1px);
  width: calc(100% + var(--penumbra-spread, 4) * 1px);
  height: calc(100% + var(--penumbra-spread, 4) * 1px);
  background: rgba(
    calc(var(--shadow-color-r, 0.2) * 255),
    calc(var(--shadow-color-g, 0.2) * 255),
    calc(var(--shadow-color-b, 0.2) * 255),
    calc(var(--shadow-opacity, 0.3) * 0.3)
  );
  z-index: -2;
  pointer-events: none;
  filter: blur(calc(var(--shadow-blur, 1) * 2px));
  transform: translate(
    calc(var(--shadow-x, 0) * 1.2px), 
    calc(var(--shadow-y, 0) * 1.2px)
  ) rotate(calc(var(--shadow-rotation, 0) * 1deg));
  border-radius: calc(var(--shadow-softness, 2) * 1px);
}
